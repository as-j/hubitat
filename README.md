# hubitat

Selection of small apps or drivers that make my life eaiser.  They're so small that this might be a good place for someone to get started with custom Groovy apps and change them (if required) for their own purpose.

App | What it does
------------ | -------------
when_on_then_off.groovy | Turn off a switch when a contact opens, as fast as hubitat can do it. I have a gate that has an electric strike (push button to buzz to open), when the gate open I use a contact sensor to turn off the buzzer.  I'd like this to be quick since the buzzing is annoying and loud.  Why not RM4? This is 2-3x faster.
slave_thermostat.groovy | Turn on heat on a 2nd theromstate when the master turns on, turn it off when the 1st thermostat goes idle.  (idle means temp is > reported temp, my thermostats don't report state changes properly) Force the 2nd thermostat off if someone turns it on after 60s. This allows someone to adjust the setpoint on the 2nd thermostat manually, but then it turns it back off. 
schedule_on_off_presence.groovy | This is very similar to simple lighting, but: Turn a switch on/off at a certain time, but only if someone is present.  For example my partner has a humidifier for the night, this turns the switch on at 9pm and off at 7am, but only if she's home.  If we're out till midnight, then it turns on when we get home.  If she's on a business trip then it's off.
power_done_monitor.groovy | Monitor a power meter for a device such as a dryer or washer finishing.  Has a threshold the power must exceed, and then a level it must stay under for some period.  Ex: Dryer when it runs takes 600 watts, when it stops it takes 6 watts.  So over 100 watts is running, under 10 watts is stopped.  (it takes 16 watts with the door open and inside light on)  My washer is all over the place, but when it runs it jumps over 500 watts and down to ~0 for 15s, and much higher when spinning.  When it stops it blinks a light and cycles between ~0W and 0.7w.  So on is over 500 watts, and off is under 1 watt for 3 minutes.
keep_on_when.groovy | Monitor switchs and power, and control another switch.  When the switch turns on keep the controlled switch on for a period.  If power rises above a threshold, turn on the switch and keep it on for a period.  Each period is configurable.  How I use it.  My dryer takes 6 watts sitting there doing nothing, so I want to turn it off when idle 99% of the time (that's 4.3kWh each month), but I want its on/off to be totally transparent to the household. So: 1. There's an automated laundry light above the washer that turns on due to motion, doors, etc.  When the laundry light turns on, turn on the dryer for 15 minutes if someone uses it.  Not the dryer is on.  If the dryer power meter reports over 10 watts, someone opened the dryer door so keep it on for 30 minutes.  If the dryer reports over 100 watts someone started it, so keep it on for 2 hours.  After that time you can turn it off.  This reacts to events happening, and always extends the time to the furthest possible time.  So if the dryer shuts off and a 2nd load starts it will then get another 2 hours.  I also monitor the washing machine, if the washer goes over 100 watts then turn on the dryer.  This is due to a bug in the dryer, if the panel gets under 60f it won't run, but if it's powered for ~30 mins before you use it on cold days then it's ok.



